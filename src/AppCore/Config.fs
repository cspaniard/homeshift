module AppCore.Config

open Model
open AppCore.Helpers

open DI.Dependencies

//----------------------------------------------------------------------------------------------------------------------
let IConfigService = IConfigServiceDI.D ()
//----------------------------------------------------------------------------------------------------------------------

//----------------------------------------------------------------------------------------------------------------------
let storeConfigOrEx (configData : ConfigData) =

    checkRootUserOrEx ()

    checkDeviceOrEx configData.SnapshotDevice

    IConfigService.storeConfigDataOrEx configData
//----------------------------------------------------------------------------------------------------------------------

//----------------------------------------------------------------------------------------------------------------------
module CLI =

    //------------------------------------------------------------------------------------------------------------------
    let storeConfigOrEx (options : ConfigOptions) =

        IConfigService.getConfigDataOrEx ()
        |> ConfigData.mergeWithOptions options
        |> storeConfigOrEx
    //------------------------------------------------------------------------------------------------------------------
